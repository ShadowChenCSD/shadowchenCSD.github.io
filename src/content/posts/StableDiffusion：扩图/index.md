---
title: StableDiffusion：扩图
published: 2024-11-28
description: 介绍如何使用WebUI或ComfyUI，对图像进行外扩补充。
tags: [AIGC·图像, 图像生成, StableDiffusion]
category: AIGC
image: "/posts/StableDiffusion.png"
---

# 1. 背景

​		当 **`对图像的尺寸不满意，期待图像扩充至更大`** 的情况时，可以使用扩图功能。

# 2. WebUI实现：Poor man‘s outpainting

## 2.1 上传参考图

​		打开WebUI，切换至**图生图**页面，使用**局部重绘**功能。

## 2.2 填充提示词

​		在**提示词**中填写参考图的提示词，也可以使用**提示词反推**功能更快捷地获得。

## 2.3 设定重绘的方式

- 注意**重绘后的尺寸**、**缩放模式**以及**向外绘制的方向**。
  - **原图**尺寸：**768 * 768**
  - **扩图**尺寸：**1024 * 768**

![WebUI扩图](WebUI_扩图.jpg)

## 2.4 效果图

|  参考图：768 * 768  |     参考图：768 * 1024      |
| :-----------------: | :-------------------------: |
| ![参考图](girl.jpg) | ![效果图](WebUI_效果图.jpg) |

# 3. ComfyUI实现方式：Flux Fill模型

## 3.1 准备蒙版图

​		利用**Pad image for Outpainting节点**实现**对图像尺寸的扩充**，并**生成蒙版**，用于填充区域的内容重绘。

​		可以修改**羽化**值，**使边缘的过渡更加柔和**。

## 3.2 设计工作流

​		可以使用**FLUX系列局部重绘专用的FLUX-Fill模型**，进行**扩图**， **效果较好**。

![Flux_Fill_扩图](Flux_Fill_扩图.jpg)

## 3.3 效果图

|  参考图：768 * 768   |      参考图：768 * 1024       |
| :------------------: | :---------------------------: |
| ![参考图](girl.jpg)  | ![效果图](ComfyUI_效果图.jpg) |
| ![参考图](plane.jpg) |   ![效果图](plane_扩图.jpg)   |